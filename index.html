<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>테일즈런너 어획물 교환 예상 레벨업 계산기</title>
	<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-gov.min.css" />
	<link rel="icon" href="data:,">
	<style>

		/*CSS Reset*/
		html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video{margin: 0; padding: 0; border: 0; font-size: 100%; vertical-align: baseline;}
		article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section{display: block;}
		body{line-height: 1;}
		ol, ul{list-style: none;}
		blockquote, q{quotes: none;}
		blockquote:before, blockquote:after, q:before, q:after{content: ''; content: none;}
		table{border-collapse: collapse; border-spacing: 0;}
		
		/*웹폰트 적용*/
		*{
			font-family: "Pretendard GOV Variable", "Pretendard GOV", -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
		}

		/*배경 동영상*/
		div.bgVideo{
			position: fixed; top: 0; left: 0;
			height: 100%; width: 100%;
			opacity: 0.3;
			z-index: -10;
		}
		.bgVideoContent{
			height: 100%;
			width: 100%;
			object-fit: cover;
		}

		/*가장 큰 컨테이너 박스*/
		.allContainer{
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			width: 100vw; height: 100vh;
		}

		/*맨 위 큰 제목 스타일*/
		h2{
			width: 540px; height: 40px;
			background: linear-gradient(#5ecffd, #5ecffd, #3bbdfd, #3bbdfd);
			border: solid 2px #0782dd; border-radius: 25px 25px 0 0; border-bottom: none;
			font-size: 1.5em; color: white; line-height: 1.8em; padding-left: 20px;
			text-shadow: -2px -2px #0782dd, 0px -2px #0782dd, 2px -2px #0782dd, -2px 0px #0782dd, 0px 0px #0782dd, 2px 0px #0782dd, -2px 2px #0782dd, 0px 2px #0782dd, 2px 2px #0782dd;
		}

		/*바깥쪽 흰색 컨테이너*/
		.outContainer{
			width: 520px; 
			border: solid 2px #0782dd; border-radius: 0 0 25px 25px;
			background-color: #ffffffe6;
			padding: 20px;
			position: relative;
		}

		/*로그 박스*/
		#logMessage{
			width: 260px; height: calc(100% - 20px);
			position: absolute; left: -300px; top: 0;
			padding: 10px;
			line-height: 1.1em;
			white-space: nowrap; overflow-x: scroll; overflow-y: scroll;
			/*background-color: #ffffffb3; backdrop-filter: blur(20px);*/
			background-color: transparent; backdrop-filter: blur(5px);
			/*border: solid 2px lightskyblue; border-radius: 10px; color: lightskyblue;*/
			border: solid 2px #0782dd; border-radius: 10px; color: #0782dd;
		}

		/*로그 버튼*/
		#logOpenButton{
			width: 74px; height: 20px;
			position: absolute; left: -90px; top: 0;
			font-size: 0.9em; color: white; text-shadow: 0px 1px #0782dd, 1px 0px #0782dd, 0px -1px #0782dd, -1px 0px #0782dd;
			border: solid 1px #0782dd; border-radius: 2px; background-color: transparent;
		}
		#logOpenButton:hover{
			/*background-color: #0782dd;*/
			color: #0782dd; text-shadow: 0px 1px white, 1px 0px white, 0px -1px white, -1px 0px white; border: solid 1px white; 
		}
		#logOpenButton:active{
			top: 1px;
		}

		/*안쪽 파란색 컨테이너*/
		.innerContainer{
			background-color: #3bbdfd;
			border: solid 2px #2095e7; border-radius: 10px;
			padding: 10px;
			margin-top: 10px;
			color: white;
		}
		h3{
			font-size: 1.3em;
			color: white;
			text-shadow: -2px -2px #2095e7, 0px -2px #2095e7, 2px -2px #2095e7, -2px 0px #2095e7, 0px 0px #2095e7, 2px 0px #2095e7, -2px 2px #2095e7, 0px 2px #2095e7, 2px 2px #2095e7;
			margin-bottom: 5px;
		}

		/*더 안쪽 짙은 파란색 컨테이너*/
		.innerContainer2{
			background-color: #2095e7;
			border-radius: 4px;
			padding: 8px;
		}

		/*입력란 스타일*/
		#colorSelect, #bootsSelect, #percentInput, .fishExp{
			height: 30px; background: none; border: none;
			color: white; font-size: 1em; padding: 0 6px;
			background-color: #0782dd; border-radius: 2px;
			margin-right: 6px;
		}
		#colorSelect{width: 20%}
		#bootsSelect{width: 40%}
		#percentInput{width: 20%}
		.fishExp{
			width: 40%;
			margin-bottom: 4px;
		}
		.fishExpSmall{
			width: 13%;
			margin-right: 0;
		}

		/*EXP 입력란 설명 문구 위치 지정*/
		.expInputContainer{
			position: relative;
		}
		.expInputDescription{
			position: absolute; right: 12px; top: 12px;
			text-align: right;
			line-height: 1.2em;
			font-size: 0.9em;
			width: 220px;
		}
		#fishExpSmallExplain{
			display: none;
		}

		#fishExpSmallButton{
			width: 180px; height: 20px;
			color: white; text-shadow: 0px 1px #CB5C27, 1px 0px #CB5C27, 0px -1px #CB5C27, -1px 0px #CB5C27;
			border: solid 1px #BA4E1A; border-radius: 2px; background: linear-gradient(to bottom, #FFCB33 0%, #FFB933 39%, #FFA800 40%, #FFA900 100%);
		}
		#fishExpSmallButton:hover{
			background: linear-gradient(to bottom, #FFDA80 0%, #FFCE71 39%, #FFC24D 40%, #FFC24D 100%);
		}
		#fishExpSmallButton:active{
			margin-top: 1px;
		}

		/*입력과 출력 레벨 시각적 표현*/
		.iconDisplay{
			width: 27px; height: 22px;
			background: linear-gradient(white, #d2d2d2);
			/*margin-right: 6px;*/
			border: solid 1px #0782dd;
			display: inline-block;
		}
		.levelBarDisplay{
			width: 90%; height: 22px;
			background: linear-gradient(#8ea7bf, #adb9c6);
			border: solid 1px #0782dd;
			display: inline-block;
			margin-top: 1px;
		}
		.levelBarDisplayInner{
			width: 0%; height: 22px;
			background: linear-gradient(#8e5fed, #326ff5, #0592fe);
		}

		/*하단 만든이 표시*/
		footer{
			color: #2095e7; text-align: center;
			margin-top: 2px;
		}

		/*모바일 환경 대응*/
		@media (max-width: 575px){

			/*배경 동영상 */
			div.bgVideo{
				display: none;
			}
			.bgVideoContent{
				display: none;
			}

			/*가장 큰 컨테이너 박스 */
			.allContainer{
				display: block;
				width: 100%; min-height: 100%;
			}

			/*맨 위 큰 제목 스타일 */
			h2{
				width: calc(100% - 24px); height: 40px;
				border-radius: 0;
			}

			h3{
				font-size: 1.2em;
			}

			/*바깥쪽 흰색 컨테이너 */
			.outContainer{
				width: calc(100% - 24px); 
				border-radius: 0;
				background-color: white;
				padding: 10px;
			}

		/*로그 박스*/
		#logMessage{
			display: none;
		}
		#logMessage>p{
			display: none;
		}

			/*입력란 스타일 */
			#colorSelect, #bootsSelect, #percentInput, .fishExp{
				height: 30px; background: none; border: none;
				color: white; font-size: 1em; padding: 0 6px;
				background-color: #0782dd; border-radius: 2px;
				margin-right: 6px;
			}
			#colorSelect{width: 90%; margin-bottom: 4px;}
			#bootsSelect{width: 90%; margin-bottom: 4px;}
			#percentInput{width: 80%}
			.fishExp{
				width: 80%;
				margin-bottom: 4px;
			}
			.fishExpSmall{
				width: 18%;
				margin-right: 0;
			}

			/*EXP 입력란 설명 문구 위치 지정 */
			.expInputContainer{
				position: static;
			}
			.expInputDescription{
				position: static;
				text-align: left;
				font-size: 1em;
				width: 95%;
				margin-bottom: 8px;
			}

			/*입력과 출력 레벨 시각적 표현 */
			.iconDisplay{
				width: 27px; height: 22px;
				background: linear-gradient(white, #d2d2d2);
				border: solid 1px #0782dd;
				display: inline-block;
			}
			.levelBarDisplay{
				width: 85%; height: 22px;
				background: linear-gradient(#8ea7bf, #adb9c6);
				border: solid 1px #0782dd;
				display: inline-block;
				margin-top: 1px;
			}
			.levelBarDisplayInner{
				width: 0%; height: 22px;
				background: linear-gradient(#8e5fed, #326ff5, #0592fe);
			}

			/*하단 만든이 표시 */
			footer{
				height: 30px;
			}

		}

	</style>
</head>
<body>

	<!-- 배경 동영상 -->
	<div class="bgVideo">
		<video class="bgVideoContent" autoplay muted loop>
			<source src="bgVideo.webm" type="video/webm" />
		</video>
	</div>

	<div class="allContainer">

		<h2>어획물 교환 예상 레벨업 계산기</h2>

		<div class="outContainer">

			<!-- 로그 공간 -->
			<div id="logMessage" style="display: none;">
				<p style="font-weight: bold; font-size: 1.2em; margin-bottom: 20px;">LOG</p>
			</div>
			<button id="logOpenButton" onclick="logButtonClick()">LOG 열기</button>

			<div class="innerContainer" style="margin-top: 0;">

				<h3>현재 본인의 레벨과 퍼센티지 입력</h3>

				<div class="innerContainer2">
					
					<div>
						
						<!-- 드롭다운 메뉴 레벨 색상 입력 -->
						<select id="colorSelect"></select>

						<!-- 드롭다운 메뉴 레벨 부츠 입력 -->
						<select id="bootsSelect"></select>

						<!-- 현재 퍼센티지 입력 -->
						<input type="number" id="percentInput" min="0" max="100" step="0.01" value="0">%

					</div>

					<div style="width: 100%; margin-top: 4px;">
						
						<div class="iconDisplay" id="iconDisplayBefore" style="position: relative;">
							<img src="levelIcons\1.webp" alt="1.webp" style="position: absolute; top: 1px; left: 1px;">
						</div>
						<div class="levelBarDisplay" style="position: relative;">
							<div class="levelBarDisplayInner" id="levelBarDisplayInnerBefore"></div>
							<div class="percentDisplay" id="percentDisplayBefore" style="position: absolute; top: 4px; left: 4px;"></div>
						</div>

					</div>

				</div>

			</div>

			<div class="innerContainer">

				<h3>어획물 전체 페이지 교환 EXP 각각 입력</h3>

				<div class="innerContainer2 expInputContainer">

					<div class="expInputDescription">
						<p style="margin-bottom: 4px;">공원의 <span style="color: palegreen; font-weight: bold;">캡틴 마도로스 NPC - 어획물 교환하기 - Exp로 교환하기</span>에 있는 '페이지전체'의 값들을 왼쪽 입력란에 각각 전부 입력해주시면 됩니다.</p>
						<button id="fishExpSmallButton" onclick="expSmallButtonClick()">교환 가능 수치 초과 상태라면?</button>
						<p id="fishExpSmallExplain">'교환 가능 수치 초과' 상태일 때는 아래의 작은 12개 칸에 그 페이지의 물고기들에 각각 <span style="color: palegreen; font-weight: bold;">교환 수량 최대</span>를 누르면 나오는 값들을 적어주세요!</p>
					</div>

					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp" min="0" step="1" value="0">EXP<br>
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">
					<input type="number" class="fishExp fishExpSmall" min="0" step="1" value="0" style="display: none;">

				</div>

			</div>

			<div class="innerContainer">

				<h3>어획물 전체 교환 시 예상 레벨 출력</h3>

				<div style="line-height: 1.2em;">

					<div class="innerContainer2">
						
						<p>예상 경험치: 약 <span class="result" id="currentExpDisplay" style="color: bisque; font-weight: bold;"></span> → </a> <span class="result" id="afterExpDisplay" style="color: bisque; font-weight: bold;"></span> EXP
						<!-- <br>예상 레벨: <span class="result" id="afterLevelDisplay" style="color: bisque; font-weight: bold;"></span></p> -->

						<div style="width: 100%; margin-top: 4px;">
											
							<div class="iconDisplay" id="iconDisplayAfter" style="position: relative;">
								<img src="levelIcons\1.webp" alt="1.webp" style="position: absolute; top: 1px; left: 1px;">
							</div>
							<div class="levelBarDisplay" style="position: relative;">
								<div class="levelBarDisplayInner" id="levelBarDisplayInnerAfter"></div>
								<div class="percentDisplay" id="percentDisplayAfter" style="position: absolute; top: 2px; left: 4px;">0.00%</div>
							</div>

						</div>

					</div>
					
				</div>

			</div>

		</div>

		<footer>제작: Strode</footer>

	</div>

<script>
	
	// 드롭다운 메뉴
	function initDropdowns() {

		// 드롭다운 초기화
		colorSelect.innerHTML = "";
		bootsSelect.innerHTML = "";

		const uniqueColors = [...new Set(levelData.map(lvl => lvl.color))];
		uniqueColors.forEach(color => {
			const option = document.createElement('option');
			option.value = color;
			option.textContent = levelData.find(lvl => lvl.color === color).koNameColor;
			colorSelect.appendChild(option);
		});

		const uniqueBoots = [...new Set(levelData.map(lvl => lvl.boots))];
		uniqueBoots.forEach(boots => {
			const option = document.createElement('option');
			option.value = boots;
			option.textContent = levelData.find(lvl => lvl.boots === boots).koNameBoots;
			bootsSelect.appendChild(option);
		});

	}

	// 현재 테일즈런너의 레벨들을 변수에 JSON 형식으로 입력
	let levelData = [

		{"level": 1, "koNameColor": "빨간색", "koNameBoots": "병아리", "color": "red", "boots": "chick", "xp": 0},
		{"level": 2, "koNameColor": "주황색", "koNameBoots": "병아리", "color": "orange", "boots": "chick", "xp": 25},
		{"level": 3, "koNameColor": "노란색", "koNameBoots": "병아리", "color": "yellow", "boots": "chick", "xp": 75},
		{"level": 4, "koNameColor": "초록색", "koNameBoots": "병아리", "color": "green", "boots": "chick", "xp": 150},
		{"level": 5, "koNameColor": "파란색", "koNameBoots": "병아리", "color": "blue", "boots": "chick", "xp": 250},
		{"level": 6, "koNameColor": "남색", "koNameBoots": "병아리", "color": "navy", "boots": "chick", "xp": 350},
		{"level": 7, "koNameColor": "보라색", "koNameBoots": "병아리", "color": "purple", "boots": "chick", "xp": 450},
		
		{"level": 8, "koNameColor": "빨간색", "koNameBoots": "발바닥", "color": "red", "boots": "sole", "xp": 600},
		{"level": 9, "koNameColor": "주황색", "koNameBoots": "발바닥", "color": "orange", "boots": "sole", "xp": 800},
		{"level": 10, "koNameColor": "노란색", "koNameBoots": "발바닥", "color": "yellow", "boots": "sole", "xp": 1000},
		{"level": 11, "koNameColor": "초록색", "koNameBoots": "발바닥", "color": "green", "boots": "sole", "xp": 1200},
		{"level": 12, "koNameColor": "파란색", "koNameBoots": "발바닥", "color": "blue", "boots": "sole", "xp": 1400},
		{"level": 13, "koNameColor": "남색", "koNameBoots": "발바닥", "color": "navy", "boots": "sole", "xp": 1600},
		{"level": 14, "koNameColor": "보라색", "koNameBoots": "발바닥", "color": "purple", "boots": "sole", "xp": 1800},
		
		{"level": 15, "koNameColor": "빨간색", "koNameBoots": "양말", "color": "red", "boots": "sock", "xp": 2000},
		{"level": 16, "koNameColor": "주황색", "koNameBoots": "양말", "color": "orange", "boots": "sock", "xp": 2500},
		{"level": 17, "koNameColor": "노란색", "koNameBoots": "양말", "color": "yellow", "boots": "sock", "xp": 3000},
		{"level": 18, "koNameColor": "초록색", "koNameBoots": "양말", "color": "green", "boots": "sock", "xp": 3750},
		{"level": 19, "koNameColor": "파란색", "koNameBoots": "양말", "color": "blue", "boots": "sock", "xp": 4500},
		{"level": 20, "koNameColor": "남색", "koNameBoots": "양말", "color": "navy", "boots": "sock", "xp": 5500},
		{"level": 21, "koNameColor": "보라색", "koNameBoots": "양말", "color": "purple", "boots": "sock", "xp": 6500},
		
		{"level": 22, "koNameColor": "빨간색", "koNameBoots": "슬리퍼", "color": "red", "boots": "slipper", "xp": 7500},
		{"level": 23, "koNameColor": "주황색", "koNameBoots": "슬리퍼", "color": "orange", "boots": "slipper", "xp": 9500},
		{"level": 24, "koNameColor": "노란색", "koNameBoots": "슬리퍼", "color": "yellow", "boots": "slipper", "xp": 11500},
		{"level": 25, "koNameColor": "초록색", "koNameBoots": "슬리퍼", "color": "green", "boots": "slipper", "xp": 14500},
		{"level": 26, "koNameColor": "파란색", "koNameBoots": "슬리퍼", "color": "blue", "boots": "slipper", "xp": 17500},
		{"level": 27, "koNameColor": "남색", "koNameBoots": "슬리퍼", "color": "navy", "boots": "slipper", "xp": 21500},
		{"level": 28, "koNameColor": "보라색", "koNameBoots": "슬리퍼", "color": "purple", "boots": "slipper", "xp": 25500},
		
		{"level": 29, "koNameColor": "빨간색", "koNameBoots": "운동화", "color": "red", "boots": "sneaker", "xp": 29500},
		{"level": 30, "koNameColor": "주황색", "koNameBoots": "운동화", "color": "orange", "boots": "sneaker", "xp": 34500},
		{"level": 31, "koNameColor": "노란색", "koNameBoots": "운동화", "color": "yellow", "boots": "sneaker", "xp": 39500},
		{"level": 32, "koNameColor": "초록색", "koNameBoots": "운동화", "color": "green", "boots": "sneaker", "xp": 47000},
		{"level": 33, "koNameColor": "파란색", "koNameBoots": "운동화", "color": "blue", "boots": "sneaker", "xp": 54500},
		{"level": 34, "koNameColor": "남색", "koNameBoots": "운동화", "color": "navy", "boots": "sneaker", "xp": 69500},
		{"level": 35, "koNameColor": "보라색", "koNameBoots": "운동화", "color": "purple", "boots": "sneaker", "xp": 84500},
		
		{"level": 36, "koNameColor": "빨간색", "koNameBoots": "윙부츠", "color": "red", "boots": "wing", "xp": 99500},
		{"level": 37, "koNameColor": "주황색", "koNameBoots": "윙부츠", "color": "orange", "boots": "wing", "xp": 124500},
		{"level": 38, "koNameColor": "노란색", "koNameBoots": "윙부츠", "color": "yellow", "boots": "wing", "xp": 149500},
		{"level": 39, "koNameColor": "초록색", "koNameBoots": "윙부츠", "color": "green", "boots": "wing", "xp": 199500},
		{"level": 40, "koNameColor": "파란색", "koNameBoots": "윙부츠", "color": "blue", "boots": "wing", "xp": 249500},
		{"level": 41, "koNameColor": "남색", "koNameBoots": "윙부츠", "color": "navy", "boots": "wing", "xp": 299500},
		{"level": 42, "koNameColor": "보라색", "koNameBoots": "윙부츠", "color": "purple", "boots": "wing", "xp": 399500},
		
		{"level": 43, "koNameColor": "빨간색", "koNameBoots": "데빌윙부츠", "color": "red", "boots": "devil", "xp": 499500},
		{"level": 44, "koNameColor": "주황색", "koNameBoots": "데빌윙부츠", "color": "orange", "boots": "devil", "xp": 649500},
		{"level": 45, "koNameColor": "노란색", "koNameBoots": "데빌윙부츠", "color": "yellow", "boots": "devil", "xp": 799500},
		{"level": 46, "koNameColor": "초록색", "koNameBoots": "데빌윙부츠", "color": "green", "boots": "devil", "xp": 999500},
		{"level": 47, "koNameColor": "파란색", "koNameBoots": "데빌윙부츠", "color": "blue", "boots": "devil", "xp": 1199500},
		{"level": 48, "koNameColor": "남색", "koNameBoots": "데빌윙부츠", "color": "navy", "boots": "devil", "xp": 1433700},
		{"level": 49, "koNameColor": "보라색", "koNameBoots": "데빌윙부츠", "color": "purple", "boots": "devil", "xp": 1683700},
		
		{"level": 50, "koNameColor": "빨간색", "koNameBoots": "엔젤윙부츠", "color": "red", "boots": "angel", "xp": 2283700},
		{"level": 51, "koNameColor": "주황색", "koNameBoots": "엔젤윙부츠", "color": "orange", "boots": "angel", "xp": 2883700},
		{"level": 52, "koNameColor": "노란색", "koNameBoots": "엔젤윙부츠", "color": "yellow", "boots": "angel", "xp": 3483700},
		{"level": 53, "koNameColor": "초록색", "koNameBoots": "엔젤윙부츠", "color": "green", "boots": "angel", "xp": 4083700},
		{"level": 54, "koNameColor": "파란색", "koNameBoots": "엔젤윙부츠", "color": "blue", "boots": "angel", "xp": 4683700},
		{"level": 55, "koNameColor": "남색", "koNameBoots": "엔젤윙부츠", "color": "navy", "boots": "angel", "xp": 5283700},
		{"level": 56, "koNameColor": "보라색", "koNameBoots": "엔젤윙부츠", "color": "purple", "boots": "angel", "xp": 5883700},
		
		{"level": 57, "koNameColor": "빨간색", "koNameBoots": "파워윙부츠", "color": "red", "boots": "power", "xp": 7983700},
		{"level": 58, "koNameColor": "주황색", "koNameBoots": "파워윙부츠", "color": "orange", "boots": "power", "xp": 10083700},
		{"level": 59, "koNameColor": "노란색", "koNameBoots": "파워윙부츠", "color": "yellow", "boots": "power", "xp": 12183700},
		{"level": 60, "koNameColor": "초록색", "koNameBoots": "파워윙부츠", "color": "green", "boots": "power", "xp": 14283700},
		{"level": 61, "koNameColor": "파란색", "koNameBoots": "파워윙부츠", "color": "blue", "boots": "power", "xp": 16383700},
		{"level": 62, "koNameColor": "남색", "koNameBoots": "파워윙부츠", "color": "navy", "boots": "power", "xp": 18483700},
		{"level": 63, "koNameColor": "보라색", "koNameBoots": "파워윙부츠", "color": "purple", "boots": "power", "xp": 20583700},
		
		{"level": 64, "koNameColor": "빨간색", "koNameBoots": "썬더윙부츠", "color": "red", "boots": "thunder", "xp": 25383700},
		{"level": 65, "koNameColor": "주황색", "koNameBoots": "썬더윙부츠", "color": "orange", "boots": "thunder", "xp": 30183700},
		{"level": 66, "koNameColor": "노란색", "koNameBoots": "썬더윙부츠", "color": "yellow", "boots": "thunder", "xp": 34983700},
		{"level": 67, "koNameColor": "초록색", "koNameBoots": "썬더윙부츠", "color": "green", "boots": "thunder", "xp": 39783700},
		{"level": 68, "koNameColor": "파란색", "koNameBoots": "썬더윙부츠", "color": "blue", "boots": "thunder", "xp": 44583700},
		{"level": 69, "koNameColor": "남색", "koNameBoots": "썬더윙부츠", "color": "navy", "boots": "thunder", "xp": 49383700},
		{"level": 70, "koNameColor": "보라색", "koNameBoots": "썬더윙부츠", "color": "purple", "boots": "thunder", "xp": 54183700},
		
		{"level": 71, "koNameColor": "빨간색", "koNameBoots": "루나윙부츠", "color": "red", "boots": "lunar", "xp": 64983700},
		{"level": 72, "koNameColor": "주황색", "koNameBoots": "루나윙부츠", "color": "orange", "boots": "lunar", "xp": 75783700},
		{"level": 73, "koNameColor": "노란색", "koNameBoots": "루나윙부츠", "color": "yellow", "boots": "lunar", "xp": 86583700},
		{"level": 74, "koNameColor": "초록색", "koNameBoots": "루나윙부츠", "color": "green", "boots": "lunar", "xp": 97383700},
		{"level": 75, "koNameColor": "파란색", "koNameBoots": "루나윙부츠", "color": "blue", "boots": "lunar", "xp": 108183700},
		{"level": 76, "koNameColor": "남색", "koNameBoots": "루나윙부츠", "color": "navy", "boots": "lunar", "xp": 118983700},
		{"level": 77, "koNameColor": "보라색", "koNameBoots": "루나윙부츠", "color": "purple", "boots": "lunar", "xp": 129783700},
		
		{"level": 78, "koNameColor": "빨간색", "koNameBoots": "쏠라윙부츠", "color": "red", "boots": "solar", "xp": 153783700},
		{"level": 79, "koNameColor": "주황색", "koNameBoots": "쏠라윙부츠", "color": "orange", "boots": "solar", "xp": 177783700},
		{"level": 80, "koNameColor": "노란색", "koNameBoots": "쏠라윙부츠", "color": "yellow", "boots": "solar", "xp": 201783700},
		{"level": 81, "koNameColor": "초록색", "koNameBoots": "쏠라윙부츠", "color": "green", "boots": "solar", "xp": 225783700},
		{"level": 82, "koNameColor": "파란색", "koNameBoots": "쏠라윙부츠", "color": "blue", "boots": "solar", "xp": 249783700},
		{"level": 83, "koNameColor": "남색", "koNameBoots": "쏠라윙부츠", "color": "navy", "boots": "solar", "xp": 273783700},
		{"level": 84, "koNameColor": "보라색", "koNameBoots": "쏠라윙부츠", "color": "purple", "boots": "solar", "xp": 297783700},
		
		{"level": 85, "koNameColor": "빨간색", "koNameBoots": "스텔라윙부츠", "color": "red", "boots": "stella", "xp": 345783700},
		{"level": 86, "koNameColor": "주황색", "koNameBoots": "스텔라윙부츠", "color": "orange", "boots": "stella", "xp": 393783700},
		{"level": 87, "koNameColor": "노란색", "koNameBoots": "스텔라윙부츠", "color": "yellow", "boots": "stella", "xp": 441783700},
		{"level": 88, "koNameColor": "초록색", "koNameBoots": "스텔라윙부츠", "color": "green", "boots": "stella", "xp": 489783700},
		{"level": 89, "koNameColor": "파란색", "koNameBoots": "스텔라윙부츠", "color": "blue", "boots": "stella", "xp": 537783700},
		{"level": 90, "koNameColor": "남색", "koNameBoots": "스텔라윙부츠", "color": "navy", "boots": "stella", "xp": 585783700},
		{"level": 91, "koNameColor": "보라색", "koNameBoots": "스텔라윙부츠", "color": "purple", "boots": "stella", "xp": 633783700},
		
		{"level": 92, "koNameColor": "빨간색", "koNameBoots": "갤럭시윙부츠", "color": "red", "boots": "galaxy", "xp": 729783700},
		{"level": 93, "koNameColor": "주황색", "koNameBoots": "갤럭시윙부츠", "color": "orange", "boots": "galaxy", "xp": 825783700},
		{"level": 94, "koNameColor": "노란색", "koNameBoots": "갤럭시윙부츠", "color": "yellow", "boots": "galaxy", "xp": 921783700},
		{"level": 95, "koNameColor": "초록색", "koNameBoots": "갤럭시윙부츠", "color": "green", "boots": "galaxy", "xp": 1017783700},
		{"level": 96, "koNameColor": "파란색", "koNameBoots": "갤럭시윙부츠", "color": "blue", "boots": "galaxy", "xp": 1113783700},
		{"level": 97, "koNameColor": "남색", "koNameBoots": "갤럭시윙부츠", "color": "navy", "boots": "galaxy", "xp": 1209783700},
		{"level": 98, "koNameColor": "보라색", "koNameBoots": "갤럭시윙부츠", "color": "purple", "boots": "galaxy", "xp": 1305783700},
		
		{"level": 99, "koNameColor": "빨간색", "koNameBoots": "홀리윙부츠", "color": "red", "boots": "holy", "xp": 1545783700},
		{"level": 100, "koNameColor": "주황색", "koNameBoots": "홀리윙부츠", "color": "orange", "boots": "holy", "xp": 1785783700},
		{"level": 101, "koNameColor": "노란색", "koNameBoots": "홀리윙부츠", "color": "yellow", "boots": "holy", "xp": 2025783700},
		{"level": 102, "koNameColor": "초록색", "koNameBoots": "홀리윙부츠", "color": "green", "boots": "holy", "xp": 2265783700},
		{"level": 103, "koNameColor": "파란색", "koNameBoots": "홀리윙부츠", "color": "blue", "boots": "holy", "xp": 2505783700},
		{"level": 104, "koNameColor": "남색", "koNameBoots": "홀리윙부츠", "color": "navy", "boots": "holy", "xp": 2745783700},
		{"level": 105, "koNameColor": "보라색", "koNameBoots": "홀리윙부츠", "color": "purple", "boots": "holy", "xp": 2985783700},
		
		{"level": 106, "koNameColor": "빨간색", "koNameBoots": "프라우드윙부츠", "color": "red", "boots": "proud", "xp": 3585783700},
		{"level": 107, "koNameColor": "주황색", "koNameBoots": "프라우드윙부츠", "color": "orange", "boots": "proud", "xp": 4185783700},
		{"level": 108, "koNameColor": "노란색", "koNameBoots": "프라우드윙부츠", "color": "yellow", "boots": "proud", "xp": 4785783700},
		{"level": 109, "koNameColor": "초록색", "koNameBoots": "프라우드윙부츠", "color": "green", "boots": "proud", "xp": 5385783700},
		{"level": 110, "koNameColor": "파란색", "koNameBoots": "프라우드윙부츠", "color": "blue", "boots": "proud", "xp": 5985783700},
		{"level": 111, "koNameColor": "남색", "koNameBoots": "프라우드윙부츠", "color": "navy", "boots": "proud", "xp": 6585783700},
		{"level": 112, "koNameColor": "보라색", "koNameBoots": "프라우드윙부츠", "color": "purple", "boots": "proud", "xp": 7185783700},

		{"level": 113, "koNameColor": "빨간색", "koNameBoots": "크로노스윙부츠", "color": "red", "boots": "cronus", "xp": 9341518810},
		{"level": 114, "koNameColor": "주황색", "koNameBoots": "크로노스윙부츠", "color": "orange", "boots": "cronus", "xp": 10555916255},
		{"level": 115, "koNameColor": "노란색", "koNameBoots": "크로노스윙부츠", "color": "yellow", "boots": "cronus", "xp": 11928185368},
		{"level": 116, "koNameColor": "초록색", "koNameBoots": "크로노스윙부츠", "color": "green", "boots": "cronus", "xp": 13478849466},
		{"level": 117, "koNameColor": "파란색", "koNameBoots": "크로노스윙부츠", "color": "blue", "boots": "cronus", "xp": 15231099897},
		{"level": 118, "koNameColor": "남색", "koNameBoots": "크로노스윙부츠", "color": "navy", "boots": "cronus", "xp": 17211142883},
		{"level": 119, "koNameColor": "보라색", "koNameBoots": "크로노스윙부츠", "color": "purple", "boots": "cronus", "xp": 19448591458},
		
		{"level": 120, "koNameColor": "빨간색", "koNameBoots": "인페르노윙부츠", "color": "red", "boots": "inferno", "xp": 25283168896},
		{"level": 121, "koNameColor": "주황색", "koNameBoots": "인페르노윙부츠", "color": "orange", "boots": "inferno", "xp": 28569980852},
		{"level": 122, "koNameColor": "노란색", "koNameBoots": "인페르노윙부츠", "color": "yellow", "boots": "inferno", "xp": 32284078363},
		{"level": 123, "koNameColor": "초록색", "koNameBoots": "인페르노윙부츠", "color": "green", "boots": "inferno", "xp": 36481008550},
		{"level": 124, "koNameColor": "파란색", "koNameBoots": "인페르노윙부츠", "color": "blue", "boots": "inferno", "xp": 41223539662},
		{"level": 125, "koNameColor": "남색", "koNameBoots": "인페르노윙부츠", "color": "navy", "boots": "inferno", "xp": 46582599818},
		{"level": 126, "koNameColor": "보라색", "koNameBoots": "인페르노윙부츠", "color": "purple", "boots": "inferno", "xp": 52638337794}
		
	];

	// 입력 요소들에서 값 가져오기, 각각 레벨 색상, 레벨 신발, 퍼센티지 값, 페이지전체 경험치 값들, 그리고 맨 아래 두 개는 출력 영역
	const colorSelect = document.getElementById('colorSelect');
	const bootsSelect = document.getElementById('bootsSelect');
	const percentInput = document.getElementById('percentInput');
	const fishExpInputs = document.querySelectorAll('.fishExp');
	const currentExpDisplay = document.getElementById('currentExpDisplay');
	const afterExpDisplay = document.getElementById('afterExpDisplay');
	const afterLevelDisplay = document.getElementById('afterLevelDisplay');

	// 디스플레이 요소들 참조
	const iconBefore = document.querySelector('#iconDisplayBefore img');
	const iconAfter = document.querySelector('#iconDisplayAfter img');
	const barBefore = document.getElementById('levelBarDisplayInnerBefore');
	const barAfter = document.getElementById('levelBarDisplayInnerAfter');
	const pctBefore = document.getElementById('percentDisplayBefore');
	const pctAfter = document.getElementById('percentDisplayAfter');

	// 레벨 색상과 신발 종류 입력하는 select 부분의 선택지 동적 추가
	const uniqueColors = [...new Set(levelData.map(lvl => lvl.color))];
	uniqueColors.forEach(color => {
		const option = document.createElement('option');
		option.value = color;
		option.textContent = levelData.find(lvl => lvl.color === color).koNameColor;
		colorSelect.appendChild(option);
	});

	const uniqueBoots = [...new Set(levelData.map(lvl => lvl.boots))];
	uniqueBoots.forEach(boots => {
		const option = document.createElement('option');
		option.value = boots;
		option.textContent = levelData.find(lvl => lvl.boots === boots).koNameBoots;
		bootsSelect.appendChild(option);
	});

	// 로그 기록 함수
	function appendLog(lines) {
		const logDiv = document.getElementById('logMessage');
		if (!logDiv) return;
		lines.forEach(line => {
			const p = document.createElement('p');
			p.textContent = line;
			logDiv.appendChild(p);
		});
		logDiv.appendChild(document.createElement('br'));
	}

	// 계산 함수
	function calculate() {

		// 색상과 신발 입력값을 가져오기
		const color = colorSelect.value;
		const boots = bootsSelect.value;

		// 퍼센티지 입력값을 수로 변환하기
		const percent = parseFloat(percentInput.value);

		// 퍼센티지 값의 범위를 검사하기 (0부터 99.99까지)
		if (isNaN(percent) || percent < 0 || percent >= 100) {
			currentExpDisplay.textContent = "";
			afterExpDisplay.textContent = "";
			// afterLevelDisplay.textContent = "";
			pctBefore.textContent = "퍼센티지 값은 0 ~ 99.99 사이의 값으로 입력해주세요.";
			pctAfter.textContent = "";

			barBefore.style.width = '0%';
			barAfter.style.width = '0%';
			iconAfter.src = 'levelIcons/1.webp';
			iconAfter.alt = '1.webp';
			return;
		}

		const currentLevel = levelData.find(lvl => lvl.color === color && lvl.boots === boots);
		if (!currentLevel) return;

		const next = levelData.find(lvl => lvl.level === currentLevel.level + 1);

		// 최고 레벨에서는 더 이상 계산하지 않음
		let nextXp;
		if (next) {
			nextXp = next.xp;
		} else {
			nextXp = currentLevel.xp;
		}

		const currentXp = currentLevel.xp + (nextXp - currentLevel.xp) * (percent/100);

		// 총 어획물 EXP 합산
		let totalFishXp = 0;
		fishExpInputs.forEach(i => totalFishXp += parseInt(i.value)||0);
		const afterXp = currentXp + totalFishXp;

		// 입력 아이콘 src 값을 변경
		iconBefore.src = `levelIcons/${currentLevel.level}.webp`;
		iconBefore.alt = `${currentLevel.level}.webp`;

		// 입력 퍼센티지 바와 텍스트 바 그래픽을 반영
		let displayPctBefore = percent;
		barBefore.style.width = displayPctBefore + '%';
		pctBefore.textContent = `Lv.${currentLevel.level} ${currentLevel.koNameColor} ${currentLevel.koNameBoots} ${displayPctBefore.toFixed(2)}%`;

		// 출력 값 계산
		currentExpDisplay.textContent = Math.round(currentXp).toLocaleString();
		afterExpDisplay.textContent = Math.round(afterXp).toLocaleString();

		// 출력 최종 퍼센티지 과도한 경우 단순화
		let final = levelData[0];
		levelData.forEach(lvl => { if (afterXp >= lvl.xp) final = lvl; });

		const finalNext = levelData.find(lvl => lvl.level === final.level + 1);
		let finalPercent;
		if (!finalNext) {
			// 최고레벨 도달
			finalPercent = 100;
		} else {
			const within = afterXp - final.xp;
			const gap = finalNext.xp - final.xp;
			finalPercent = Math.min((within / gap) * 100, 100);
		}

		// 출력 아이콘 src 변경
		iconAfter.src = `levelIcons/${final.level}.webp`;
		iconAfter.alt = `${final.level}.webp`;

		// 출력 퍼센티지 바 & 텍스트 반영
		barAfter.style.width = finalPercent + '%';
		pctAfter.textContent  = `Lv.${final.level} ${final.koNameColor} ${final.koNameBoots} ${finalPercent.toFixed(2)}%`;

	}

	// 이벤트리스너 동일
	colorSelect.addEventListener('change', calculate);
	bootsSelect.addEventListener('change', calculate);
	percentInput.addEventListener('input', calculate);
	fishExpInputs.forEach(i=>i.addEventListener('input', calculate));

	calculate();



	// 버튼 두 개 클릭 작동 함수

	function logButtonClick(){

		// 숨겨야 할 버튼 요소 가져오기
		const logButton = document.getElementById('logOpenButton');
		
		// 나타나게 할 요소 가져오기
		const logBox = document.getElementById('logMessage');
		
		// 버튼 숨기기
		logButton.style.display = 'none';
		
		// 로그 박스 보이기
		logBox.style.display = 'block';

	}

	function expSmallButtonClick(){

		// 숨겨야 할 버튼 요소 가져오기
		const expSmallButton = document.getElementById('fishExpSmallButton');
		
		// 나타나게 할 요소 가져오기
		const expSmallExplain = document.getElementById('fishExpSmallExplain');
		const expSmallInputs = document.querySelectorAll('.fishExpSmall');
		
		// 버튼 숨기기
		expSmallButton.style.display = 'none';
		
		// 추가 입력 박스 보이기
		expSmallExplain.style.display = 'block';
		expSmallInputs.forEach(element => {
			element.style.display = 'inline-block'; 
		});

	}



	// 이 아래부터는 왼쪽 'LOG' 칸에 기록할 용도

	// 색상 드롭다운 로그
	colorSelect.addEventListener('change', () => {
		// clearLogs();
		const lvl = levelData.find(l => l.color === colorSelect.value && l.boots === bootsSelect.value);
		if (lvl) {
			appendLog([
				`현재 레벨 입력: ${lvl.koNameColor} ${lvl.koNameBoots}`,
				`${lvl.koNameColor} ${lvl.koNameBoots} 경험치: ${lvl.xp.toLocaleString()} EXP 이상`
			]);
		}
	});

	// 신발 드롭다운 로그
	bootsSelect.addEventListener('change', () => {
		// clearLogs();
		const lvl = levelData.find(l => l.color === colorSelect.value && l.boots === bootsSelect.value);
		if (lvl) {
			appendLog([
				`현재 레벨 입력: ${lvl.koNameColor} ${lvl.koNameBoots}`,
				`${lvl.koNameColor} ${lvl.koNameBoots} 경험치: ${lvl.xp.toLocaleString()} EXP 이상`
			]);
		}
	});

	// 퍼센티지 입력 blur(입력란의 포커스가 취소됐을 때) 로그
	percentInput.addEventListener('blur', () => {
		const p = parseFloat(percentInput.value);
		if (isNaN(p) || p < 0 || p >= 100) return;

		const curr = levelData.find(l => l.color === colorSelect.value && l.boots === bootsSelect.value);
		const next = levelData.find(l => l.level === curr.level + 1);
		if (!curr || !next) return;

		const needed = next.xp - curr.xp;
		const currXpCalc = curr.xp + needed * (p / 100);

		appendLog([
			`현재 레벨의 퍼센티지 입력: ${p.toFixed(2)}%`,
			`입력되어 있는 현재 레벨: ${curr.koNameColor} ${curr.koNameBoots}`,
			`다음 레벨: ${next.koNameColor} ${next.koNameBoots}`,
			`${curr.koNameColor} ${curr.koNameBoots} 달성 조건: ${curr.xp.toLocaleString()} EXP`,
			`${next.koNameColor} ${next.koNameBoots} 달성 조건: ${next.xp.toLocaleString()} EXP`,
			`${next.koNameColor} ${next.koNameBoots} 달성에 필요한 추가 경험치: ${needed.toLocaleString()} EXP`,
			`입력된 퍼센티지로 현재 총 경험치 계산: ${curr.xp.toLocaleString()} + ${needed.toLocaleString()} * ${(p/100).toFixed(4)} = 약 ${Math.round(currXpCalc).toLocaleString()} EXP`
		]);
	});

	// 어획물 EXP 입력 blur(입력란의 포커스가 취소됐을 때) 로그
	fishExpInputs.forEach(input => {
		input.addEventListener('blur', () => {
			const curr = levelData.find(l => l.color === colorSelect.value && l.boots === bootsSelect.value);
			const next = levelData.find(l => l.level === curr.level + 1);

			const p = parseFloat(percentInput.value);
			const needed = next ? next.xp - curr.xp : 0;
			const currXpCalc = curr.xp + (next ? needed * (p / 100) : 0);

			let sumFish = 0;
			fishExpInputs.forEach(inp => sumFish += parseInt(inp.value) || 0);
			const afterXp = currXpCalc + sumFish;

			let finalLevel = levelData[0];
			levelData.forEach(l => { if (afterXp >= l.xp) finalLevel = l; });
			const finalNext = levelData.find(l => l.level === finalLevel.level + 1);

			const additionalNeeded = finalNext ? finalNext.xp - finalLevel.xp : 0;
			const within = afterXp - finalLevel.xp;
			const finalPct = finalNext ? Math.min(within / additionalNeeded * 100, 100) : 100;

			appendLog([
				`어획물 경험치 총 입력: ${sumFish.toLocaleString()} EXP`,
				`현재 경험치: 약 ${Math.round(currXpCalc).toLocaleString()} EXP`,
				`입력한 어획물들을 전부 EXP로 더하면: 약 ${Math.round(afterXp).toLocaleString()} EXP`,
				`최소 약 ${Math.round(afterXp).toLocaleString()} EXP를 만족하는 레벨: ${finalLevel.koNameColor} ${finalLevel.koNameBoots}`,
				`${finalLevel.koNameColor} ${finalLevel.koNameBoots} 달성 조건: ${finalLevel.xp.toLocaleString()} EXP`,
				`${finalNext ? finalNext.koNameColor + ' ' + finalNext.koNameBoots : '최대 레벨'} 달성 조건: ${finalNext ? finalNext.xp.toLocaleString() : ''} EXP`,
				`${finalNext ? finalNext.koNameColor + ' ' + finalNext.koNameBoots : ''}로 레벨업 시 필요한 추가 경험치: ${additionalNeeded.toLocaleString()} EXP`,
				`교환 후 경험치에서 ${finalLevel.koNameColor} ${finalLevel.koNameBoots} 최소 경험치를 빼면: ${(afterXp - finalLevel.xp).toLocaleString()} EXP`,
				`교환 후 레벨의 퍼센티지 계산: ${(within / (additionalNeeded || 1) * 100).toFixed(2)}%`
			]);
		});
	});

</script>

</body>
</html>
